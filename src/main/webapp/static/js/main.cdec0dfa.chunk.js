(this["webpackJsonpdoordash-app"]=this["webpackJsonpdoordash-app"]||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(23),r=n.n(s),i=(n(151),n(33)),o=(n(152),n(238)),l=n(235),u=n(85),j=n(106),d=n(104),h=n(142),b=n(233),f=n(237),m=n(58),p=n(241),O=n(242),g=function(e){var t=e.username,n=e.password,a="/login?username=".concat(t,"&password=").concat(n);return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(console.log("login->",e),e.status<200||e.status>=300)throw Error("Fail to log in")}))},x=function(e){return fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to sign up")}))},y=n(7),v=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={loading:!1},e.onFinish=function(t){e.setState({loading:!0}),g(t).then((function(){h.b.success("Login Successful"),e.props.onSuccess()})).catch((function(e){h.b.error(e.message)})).finally((function(){e.setState({loading:!1})}))},e.render=function(){return Object(y.jsxs)(b.a,{name:"normal_login",onFinish:e.onFinish,style:{width:300,margin:"auto"},children:[Object(y.jsx)(b.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(y.jsx)(f.a,{prefix:Object(y.jsx)(p.a,{}),placeholder:"Username"})}),Object(y.jsx)(b.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(y.jsx)(f.a.Password,{prefix:Object(y.jsx)(O.a,{}),placeholder:"Password"})}),Object(y.jsx)(b.a.Item,{children:Object(y.jsx)(m.a,{type:"primary",htmlType:"submit",loading:e.state.loading,children:"Log in"})})]})},e}return n}(c.a.Component),S=v,w=n(75),C=n(56),F=n(234),I=n(232),P=n(240),k=n(146),T=w.a.Option,E=function(e){var t=e.itemId,n=Object(a.useState)(!1),c=Object(i.a)(n,2),s=c[0],r=c[1];return Object(y.jsx)(C.a,{title:"Add to shopping cart",children:Object(y.jsx)(m.a,{loading:s,type:"primary",icon:Object(y.jsx)(k.a,{}),onClick:function(){r(!0),function(e){return fetch("/order/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(t).then((function(){return h.b.success("Successfully add item")})).catch((function(e){return h.b.error(e.message)})).finally((function(){r(!1)}))}})})},M=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(a.useState)([]),j=Object(i.a)(u,2),d=j[0],b=j[1],f=Object(a.useState)(!1),m=Object(i.a)(f,2),p=m[0],O=m[1],g=Object(a.useState)([]),x=Object(i.a)(g,2),v=x[0],S=x[1];return Object(a.useEffect)((function(){l(!0),fetch("/restaurants").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get restaurants");return e.json()})).then((function(e){b(e)})).catch((function(e){h.b.error(e.message)})).finally((function(){l(!1)}))}),[]),Object(a.useEffect)((function(){var e;n&&(O(!0),(e=n,fetch("/restaurant/".concat(e,"/menu")).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get menus");return e.json()}))).then((function(e){S(e)})).catch((function(e){h.b.error(e.message)})).finally((function(){O(!1)})))}),[n]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(w.a,{value:n,onSelect:function(e){return c(e)},placeholder:"Select a restaurant",loading:o,style:{width:300},onChange:function(){},children:d.map((function(e){return Object(y.jsx)(T,{value:e.id,children:e.name},e.id)}))}),n&&Object(y.jsx)(F.b,{style:{marginTop:20},loading:p,grid:{gutter:16,xs:1,sm:1,md:3,lg:3,xl:3,xxl:3},dataSource:v,renderItem:function(e){return Object(y.jsx)(F.b.Item,{children:Object(y.jsxs)(I.a,{title:e.name,extra:Object(y.jsx)(E,{itemId:e.id}),children:[Object(y.jsx)("img",{src:e.imageUrl,alt:e.name,style:{height:"auto",width:"100%",display:"block"}}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:["Price:$".concat(e.price)," ",Object(y.jsx)(P.a,{content:e.description,title:e.name,trigger:"click",children:"More"})]})]})})}})]})},L=n(239),q=n(243),N=l.a.Text,R=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(a.useState)(),j=Object(i.a)(u,2),d=j[0],b=j[1],f=Object(a.useState)(!1),p=Object(i.a)(f,2),O=p[0],g=p[1];Object(a.useEffect)((function(){n&&(l(!0),fetch("/cart").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get shopping cart data");return e.json()})).then((function(e){b(e)})).catch((function(e){h.b.error(e.message)})).finally((function(){l(!1)})))}),[n]);var x=function(){c(!1)};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(m.a,{type:"primary",shape:"round",onClick:function(){c(!0)},children:["Cart",Object(y.jsx)(q.a,{})]}),Object(y.jsx)(L.a,{title:"My Shopping Cart",onClose:x,visible:n,width:520,footer:Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)(N,{strong:!0,children:"Total price: $".concat(null===d||void 0===d?void 0:d.totalPrice.toFixed(2))}),Object(y.jsxs)("div",{children:[Object(y.jsx)(m.a,{onClick:x,style:{marginRight:8},children:"Cancel"}),Object(y.jsx)(m.a,{onClick:function(){g(!0),fetch("/checkout").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to checkout")})).then((function(){h.b.success("Successfully checkout"),c(!1)})).catch((function(e){h.b.error(e.message)})).finally((function(){g(!1)}))},type:"primary",loading:O,disabled:o||0===(null===d||void 0===d?void 0:d.orderItemList.length),children:"Checkout"})]})]}),children:Object(y.jsx)(F.b,{loading:o,itemLayout:"horizontal",dataSource:d?d.orderItemList:[],renderItem:function(e){return Object(y.jsx)(F.b.Item,{children:Object(y.jsx)(F.b.Item.Meta,{title:e.menuItem.name,description:"$".concat(e.price)})})}})})]})},A=n(236),B=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={displayModal:!1},e.handleCancel=function(){e.setState({displayModal:!1})},e.signupOnClick=function(){e.setState({displayModal:!0})},e.onFinish=function(t){x(t).then((function(){e.setState({displayModal:!1}),h.b.success("Successfully signed up")})).catch((function(e){h.b.error(e.message)}))},e.render=function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(m.a,{shape:"round",type:"primary",onClick:e.signupOnClick,children:"Register"}),Object(y.jsx)(A.a,{title:"Register",visible:e.state.displayModal,onCancel:e.handleCancel,footer:null,destroyOnClose:!0,children:Object(y.jsxs)(b.a,{name:"normal_register",initialValues:{remember:!0},onFinish:e.onFinish,preserve:!1,children:[Object(y.jsx)(b.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(y.jsx)(f.a,{prefix:Object(y.jsx)(p.a,{}),placeholder:"Email"})}),Object(y.jsx)(b.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(y.jsx)(f.a,{prefix:Object(y.jsx)(O.a,{}),placeholder:"Password"})}),Object(y.jsx)(b.a.Item,{name:"firstName",rules:[{required:!0,message:"Please input your first name!"}],children:Object(y.jsx)(f.a,{placeholder:"firstname"})}),Object(y.jsx)(b.a.Item,{name:"lastName",rules:[{required:!0,message:"Please input your last name!"}],children:Object(y.jsx)(f.a,{placeholder:"lastname"})}),Object(y.jsx)(b.a.Item,{children:Object(y.jsx)(m.a,{type:"primary",htmlType:"submit",children:"Register"})})]})})]})},e}return n}(c.a.Component),H=B,J=o.a.Header,U=o.a.Content,$=l.a.Title;var _=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(y.jsxs)(o.a,{style:{height:"100vh"},children:[Object(y.jsx)(J,{children:Object(y.jsxs)("div",{className:"header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(y.jsx)($,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0,fontFamily:"cursive"},children:"Chew-Chew"}),Object(y.jsx)("div",{children:n?Object(y.jsx)(R,{}):Object(y.jsx)(H,{})})]})}),Object(y.jsx)(U,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(y.jsx)(M,{}):Object(y.jsx)(S,{onSuccess:function(){return c(!0)}})})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,244)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(y.jsx)(_,{}),document.getElementById("root")),z()}},[[230,1,2]]]);
//# sourceMappingURL=main.cdec0dfa.chunk.js.map